# Dokploy Configuration for Clarin CRM
# =====================================
# This file is used by Dokploy to deploy the application

# Application Settings
name: clarin
description: WhatsApp Business CRM Multi-tenant

# Compose Configuration
compose:
  file: docker-compose.yml
  
# Domain Configuration  
domains:
  - host: clarin.naperu.cloud
    https: true
    certificateType: letsencrypt

# Health Check
healthCheck:
  path: /health
  port: 8080
  interval: 30s
  timeout: 10s
  retries: 3

# Build Configuration
build:
  # Build all services
  services:
    - backend
    - frontend

# Environment Variables (set these in Dokploy UI)
envExample:
  - POSTGRES_PASSWORD
  - JWT_SECRET
  - ADMIN_PASSWORD
  - REDIS_PASSWORD

# Volumes (persistent storage)
volumes:
  - postgres_data
  - redis_data
  - whatsapp_sessions

# Resources (optional - configure in Dokploy UI)
# resources:
#   backend:
#     cpu: 1
#     memory: 1024
#   frontend:
#     cpu: 0.5
#     memory: 512
